# Snakefile for ruuning the inferringscript 'inferr.py' which figures out the library-type

script_dir=os.path.dirname(__file__)
configfile: "config.json"
folder = "data/intermediate/"
reference=re.split('/|\.',config["trinity"]["reference"])[-2]
mapped_reads=config["bowtie2"]["mapped-reads"]
readname=config["input"]["readname"]
readpath=config["input"]["reads"][0]
script_dir=config["script_dir"]

PE_SE="paired" if len(config["input"]["reads"])==2 else "single"

rule inferr:
    input:
        config["busco"]["annotation"],
        config["bowtie2"]["mapped-reads"],
        'programs.checked'
    output:
        'data/output/result_{readname}_on_{reference}.txt'
    shell:
        "python {script_dir}/inferr_lib.py {reference}  {mapped_reads} {readname} {readpath} {PE_SE} "
